import React, { useRef, useEffect, useState } from "react";

const CurvedArrow = () => {
  const pathRef = useRef(null);
  const [pathLength, setPathLength] = useState(0);
  const [isVisible, setIsVisible] = useState(false);

  useEffect(() => {
    if (pathRef.current) {
      const length = pathRef.current.getTotalLength();
      setPathLength(length);
      pathRef.current.style.strokeDasharray = length;
      pathRef.current.style.strokeDashoffset = length;
    }

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => setIsVisible(entry.isIntersecting));
      },
      { threshold: 0.1 }
    );

    if (pathRef.current) observer.observe(pathRef.current);

    return () => observer.disconnect();
  }, []);

  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 768 432"
      width="768"
      height="432"
      className="absolute left-1/2 -translate-x-1/2 -translate-y-80 z-50" 
      // <- adjusted -translate-y-52 to place it higher
    >
      <path
        ref={pathRef}
        d="
M745.037354,99.007019 
	C749.596680,78.339912 751.830322,57.752686 753.390503,37.087650 
	C753.853394,30.955505 753.778442,24.779684 753.854187,18.622700 
	C753.891357,15.600026 754.742432,13.081059 758.166931,13.126928 
	C761.567688,13.172480 762.347534,15.614745 762.292908,18.699419 
	C762.142456,27.197048 762.966919,35.791981 761.970642,44.177929 
	C759.900269,61.604671 758.452942,79.113213 753.995300,96.253059 
	C749.943542,111.832397 745.233154,127.059898 738.309570,141.607422 
	C734.221558,150.197006 729.262817,158.316193 723.752075,165.949326 
	C706.705750,189.560867 684.894043,207.700897 659.042542,221.215042 
	C646.320923,227.865372 633.306519,233.769943 619.791565,238.403732 
	C604.264587,243.727371 588.385437,247.885590 572.359985,251.638321 
	C558.614014,254.857285 544.742004,257.108246 530.855347,259.172272 
	C515.126282,261.510193 499.269836,263.052826 483.407349,264.525482 
	C459.026031,266.789093 434.530853,266.543457 410.160400,268.821075 
	C398.249329,269.934265 386.250092,269.902893 374.285889,270.794922 
	C355.389221,272.203857 336.497742,273.559357 317.659821,275.619446 
	C303.149017,277.206360 288.534912,278.185486 274.159973,280.590027 
	C257.519775,283.373444 240.837631,286.002136 224.349945,289.807495 
	C213.192566,292.382568 202.076889,295.036835 190.991943,297.913818 
	C174.697754,302.142853 158.966812,307.910461 143.455719,314.308411 
	C128.485321,320.483307 114.286179,328.190247 101.325142,337.929169 
	C86.212440,349.284821 73.793869,363.043457 66.281357,380.629639 
	C63.519115,387.095795 61.603199,393.927277 60.389709,401.686066 
	C66.498558,398.867157 70.950485,394.585205 76.795822,393.071991 
	C77.110565,392.990509 77.375511,392.722961 77.689697,392.631958 
	C80.706360,391.758179 84.670654,390.176300 85.939026,393.937836 
	C87.071434,397.296112 82.874123,398.163574 80.357239,398.964050 
	C69.786942,402.326019 63.062141,409.773346 58.153408,419.246918 
	C56.890694,421.683899 55.623329,424.285950 52.356083,423.756561 
	C49.047855,423.220490 48.278736,420.601105 47.675472,417.544220 
	C46.227989,410.209351 41.421299,404.786682 36.133736,399.945129 
	C32.980053,397.057434 29.590860,394.329468 25.436573,392.699432 
	C23.284294,391.854950 20.131172,390.627258 21.727055,387.436951 
	C23.106331,384.679657 26.153965,385.294952 28.398405,386.428192 
	C35.583794,390.056335 42.032261,394.736450 47.451321,400.761047 
	C48.314987,401.721161 49.068401,402.915283 51.217316,403.255676 
	C52.555321,399.052032 53.349396,394.490723 54.382370,390.231750 
	C58.826275,371.909393 69.143143,357.461792 82.342491,344.679565 
	C101.359100,326.263916 124.447662,314.590759 148.700760,304.916321 
	C169.670837,296.551483 191.281265,290.295654 213.335297,285.494110 
	C233.732758,281.053192 254.159134,276.987640 274.924622,274.419281 
	C288.398560,272.752747 301.838501,270.897797 315.349426,269.412109 
	C334.014130,267.359680 352.695374,265.918396 371.410400,264.527039 
	C390.504791,263.107513 409.652283,262.693085 428.703278,261.270782 
	C447.792480,259.845581 466.954041,260.069183 485.986542,257.998230 
	C499.679077,256.508331 513.513672,255.827927 527.036377,253.401535 
	C543.312500,250.481110 559.696411,248.162872 575.815613,244.100250 
	C592.077820,240.001572 608.211975,235.629059 623.928955,229.864120 
	C645.784668,221.847504 666.189453,210.929352 684.501282,196.536285 
	C701.549194,183.136612 715.076477,166.600204 725.832275,147.703369 
	C734.505432,132.465530 739.764404,115.977333 745.037354,99.007019 
z"
        fill="none"
        stroke="#2d2d2d"
        strokeWidth="4"
        style={{
          strokeDasharray: pathLength,
          strokeDashoffset: isVisible ? 0 : pathLength,
          transition: "stroke-dashoffset 1.5s ease-in-out",
        }}
      />
    </svg>
  );
};

export default CurvedArrow;
