/* ============================================================
   CINEMATIC REBUILD v3
   Light-first. Dark sections intentional and isolated.
   No global dark inheritance. No color leaks between sections.
   No overlay blocks pointer-events.
   GPU-only: transform + opacity + filter:blur (composited).
   ============================================================ */

/* ---------------------------------------------------------------------------
   GLOBAL ANIMATION RULE: every section must animate in — no snapping
   (handled via Framer Motion whileInView on each scene)
   --------------------------------------------------------------------------- */

/* ---------------------------------------------------------------------------
   SCENE BACKGROUNDS — light palette tones only
   Derived from existing palette tokens. No pure black. No pure white.
   Dark sections isolated below.
   --------------------------------------------------------------------------- */

/* Capability Matrix — cool steel wash */
.scene-cinematic.scene-capability-matrix {
  background:
    radial-gradient(62% 48% at 80% 18%, rgba(145, 162, 186, 0.18) 0%, transparent 70%),
    linear-gradient(180deg, #eef1f6 0%, #e8edf4 44%, #eaecf1 100%);
}

/* Narrative Bridge — warm cream */
.scene-cinematic.scene-narrative-bridge {
  background:
    radial-gradient(54% 40% at 20% 22%, rgba(211, 202, 187, 0.26) 0%, transparent 68%),
    radial-gradient(38% 44% at 82% 72%, rgba(181, 146, 79, 0.09) 0%, transparent 64%),
    linear-gradient(180deg, #faf7f2 0%, #f5f0e8 50%, #f0ebe1 100%);
}

/* Proof Theater — warm ivory */
.scene-cinematic.scene-proof-theater {
  background:
    radial-gradient(48% 38% at 74% 14%, rgba(181, 146, 79, 0.08) 0%, transparent 62%),
    radial-gradient(42% 52% at 14% 80%, rgba(203, 213, 226, 0.14) 0%, transparent 60%),
    linear-gradient(180deg, #faf8f4 0%, #f7f3ec 52%, #f3ede3 100%);
}

/* Global Footer — warm linen, light */
.scene-cinematic.scene-global-footer {
  background:
    radial-gradient(50% 36% at 50% 0%, rgba(181, 146, 79, 0.07) 0%, transparent 60%),
    linear-gradient(180deg, #faf8f4 0%, #f5f1e8 100%);
}

/* Conversion Chamber — dark editorial left panel is isolated via inline style.
   The scene wrapper itself stays light so no global dark leakage. */
.scene-cinematic.scene-conversion-chamber {
  background: var(--color-surface, #f6f7f9);
}

/* ---------------------------------------------------------------------------
   BREATHING GRADIENT MESH — Capability scene only
   --------------------------------------------------------------------------- */

.scene-capability-matrix .flagship-scene-content::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
  background: radial-gradient(58% 32% at 50% 0%, rgba(198, 208, 221, 0.22) 0%, transparent 60%);
  opacity: 0;
  animation: cine-mesh-breathe 8s ease-in-out infinite alternate;
}

@keyframes cine-mesh-breathe {
  from { opacity: 0; }
  to   { opacity: 1; }
}

/* ---------------------------------------------------------------------------
   FILM GRAIN OVERLAY — 2% opacity on light sections
   --------------------------------------------------------------------------- */

.cine-grain-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 1;
  opacity: 0.022;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='200' height='200'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='200' height='200' filter='url(%23noise)'/%3E%3C/svg%3E");
  background-size: 180px 180px;
  mix-blend-mode: multiply;
}

/* Slightly more visible on intentional dark sections */
.flagship-scene-dark .cine-grain-overlay,
.flagship-scene-deep .cine-grain-overlay {
  opacity: 0.048;
  mix-blend-mode: screen;
}

/* ---------------------------------------------------------------------------
   SCENE GLOW RADIALS — accent overlays at 3–6% max opacity
   --------------------------------------------------------------------------- */

.cine-scene-glow {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 0;
}

.cine-scene-glow-warm {
  background: radial-gradient(ellipse 48% 30% at 50% 50%, rgba(181, 146, 79, 0.05) 0%, transparent 70%);
}

.cine-scene-glow-cool {
  background: radial-gradient(ellipse 44% 28% at 50% 50%, rgba(145, 162, 186, 0.07) 0%, transparent 70%);
}

/* ---------------------------------------------------------------------------
   HERO — lens warmth + parallax shimmer
   --------------------------------------------------------------------------- */

.hero-lens-warmtint {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 3;
  background:
    radial-gradient(ellipse 55% 42% at 15% 90%, rgba(181, 146, 79, 0.11) 0%, transparent 68%),
    radial-gradient(ellipse 38% 28% at 88% 5%, rgba(255, 240, 210, 0.12) 0%, transparent 60%);
}

.hero-parallax-shimmer {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 1;
  background: linear-gradient(
    105deg,
    transparent 36%,
    rgba(255, 248, 232, 0.04) 50%,
    transparent 64%
  );
  background-size: 200% 100%;
  animation: cine-shimmer 6s ease-in-out infinite;
}

@keyframes cine-shimmer {
  0%, 100% { background-position: 200% 0; }
  50%       { background-position: -200% 0; }
}

/* ---------------------------------------------------------------------------
   CTA BUTTONS — hover + transition
   All must remain clickable (pointer-events not blocked anywhere)
   --------------------------------------------------------------------------- */

.lux-cta-dark,
.lux-cta-dark-outline,
.scribble-button {
  transition:
    transform 0.32s cubic-bezier(0.22, 0.61, 0.36, 1),
    box-shadow 0.32s cubic-bezier(0.22, 0.61, 0.36, 1),
    opacity 0.24s ease;
}

.lux-cta-dark:hover,
.lux-cta-dark-outline:hover {
  transform: scale(1.03) translateY(-1px);
}

.lux-cta-dark:active,
.lux-cta-dark-outline:active {
  transform: scale(0.98) translateY(0);
}

/* Hover scale for buttons using system color darkening */
.lux-cta-dark:hover {
  filter: brightness(0.92);
}

/* ---------------------------------------------------------------------------
   FINAL CTA PULSE — scale 1→1.015→1 every 4 seconds
   Handled via Framer Motion animate in GlobalFooterScene.
   This class is a fallback for non-motion instances.
   --------------------------------------------------------------------------- */

@keyframes cine-cta-pulse {
  0%, 100% { transform: scale(1); }
  50%       { transform: scale(1.015); }
}

.cine-cta-pulse-css {
  animation: cine-cta-pulse 4s cubic-bezier(0.22, 0.61, 0.36, 1) infinite;
}

/* ---------------------------------------------------------------------------
   PARALLAX LAYERS — GPU accelerated
   --------------------------------------------------------------------------- */

.cine-parallax-bg,
.cine-parallax-mid,
.scene-ambient-layer {
  will-change: transform;
  backface-visibility: hidden;
}

/* ---------------------------------------------------------------------------
   NARRATIVE BRIDGE — backdrop glow
   --------------------------------------------------------------------------- */

.scene-narrative-bridge .flagship-scene-content {
  position: relative;
}

.scene-narrative-bridge .flagship-scene-content::after {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: radial-gradient(ellipse 60% 50% at 50% 50%, rgba(248, 246, 242, 0.55) 0%, transparent 70%);
  z-index: 0;
}

/* ---------------------------------------------------------------------------
   PROOF THEATER — card shadow intensifies on entrance
   --------------------------------------------------------------------------- */

.scene-proof-theater .cinematic-scene-card {
  box-shadow: 0 8px 32px rgba(16, 15, 13, 0.08);
  transition:
    box-shadow 0.4s cubic-bezier(0.22, 0.61, 0.36, 1),
    transform 0.4s cubic-bezier(0.22, 0.61, 0.36, 1);
}

.scene-proof-theater .cinematic-scene-card:hover {
  box-shadow: 0 16px 48px rgba(16, 15, 13, 0.14);
}

/* ---------------------------------------------------------------------------
   TONE BRIDGES — gradient blending between sections
   No color leaks. Isolated per bridge.
   --------------------------------------------------------------------------- */

.homepage-tone-bridge {
  position: relative;
  pointer-events: none;
}

/* ---------------------------------------------------------------------------
   OPERATIONS SPINE — card entrance helpers
   GSAP drives x + rotateY + blur. CSS sets perspective context.
   --------------------------------------------------------------------------- */

.osv2-card-perspective {
  perspective: 900px;
  perspective-origin: center center;
}

/* ---------------------------------------------------------------------------
   AMBIENT DEPTH FIELD — light variant accents
   --------------------------------------------------------------------------- */

.scene-ambient-warm .scene-ambient-back {
  background:
    radial-gradient(ellipse 54% 36% at 62% 46%, rgba(211, 198, 172, 0.26) 0%, transparent 66%),
    radial-gradient(ellipse 32% 24% at 22% 68%, rgba(181, 146, 79, 0.12) 0%, transparent 54%);
}

.scene-ambient-matrix .scene-ambient-mid {
  background:
    radial-gradient(ellipse 48% 32% at 38% 28%, rgba(145, 162, 186, 0.2) 0%, transparent 62%),
    radial-gradient(ellipse 28% 20% at 74% 72%, rgba(198, 208, 221, 0.14) 0%, transparent 50%);
}

/* ---------------------------------------------------------------------------
   SCENE ENTRANCE — CSS fallback (motion handled in JS via Framer Motion)
   --------------------------------------------------------------------------- */

.cine-scene-enter {
  opacity: 0;
  transform: translateY(24px);
}

.cine-scene-enter-active {
  opacity: 1;
  transform: translateY(0);
  transition:
    opacity 0.9s cubic-bezier(0.22, 0.61, 0.36, 1),
    transform 0.9s cubic-bezier(0.22, 0.61, 0.36, 1);
}

/* ---------------------------------------------------------------------------
   FOCUS RINGS
   --------------------------------------------------------------------------- */

.scribble-button:focus-visible,
.lux-cta-dark:focus-visible,
.lux-cta-dark-outline:focus-visible {
  outline: 2px solid var(--lux-gold, rgba(181, 146, 79, 0.8));
  outline-offset: 3px;
}

/* ---------------------------------------------------------------------------
   REDUCED MOTION — disable all cine animations
   --------------------------------------------------------------------------- */

@media (prefers-reduced-motion: reduce) {
  .cine-grain-overlay,
  .hero-parallax-shimmer,
  .hero-lens-warmtint,
  .cine-scene-glow,
  .cine-cta-pulse-css {
    animation: none !important;
    opacity: 0 !important;
  }

  .scene-capability-matrix .flagship-scene-content::before {
    animation: none !important;
    opacity: 0 !important;
  }

  .lux-cta-dark,
  .lux-cta-dark-outline,
  .scribble-button {
    transition: none !important;
  }

  .cine-parallax-bg,
  .cine-parallax-mid,
  .scene-ambient-layer {
    will-change: auto !important;
    transform: none !important;
  }
}

/* ===========================================================================
   CINEMATIC SCROLL ARCHITECTURE — GSAP supplement
   Scene 03: Signature Reel pinned horizontal supplemental styles.
   =========================================================================== */

/* Signature reel scene — dark, no inner overflow issues */
#signature-reel {
  /* Outer: 220vh in JS via inline style */
  position: relative;
}

/* Ensure body is the scroll root — no interference */
html,
body {
  overflow-x: hidden;
}

/* Scene wrapper min-height fallback via custom property */
.flagship-scene {
  min-height: var(--scene-min-height, 100vh);
}

/* Reduced motion: skip all GSAP-driven transform animations */
@media (prefers-reduced-motion: reduce) {
  .scene-ambient-layer,
  .hero-parallax-shimmer,
  [data-gsap-reveal],
  [data-metric-card],
  [data-headline-line],
  [data-capability-card],
  [data-bridge-reveal],
  [data-proof-header],
  [data-footer-reveal] {
    opacity: 1 !important;
    transform: none !important;
    filter: none !important;
    clip-path: none !important;
  }
}

/* Authority ledger CTA spacing */
.authority-ledger-cta {
  display: flex;
}

/* Signature reel horizontal track — GPU layer */
[data-reel-panel] {
  will-change: opacity;
  transform: translateZ(0);
}